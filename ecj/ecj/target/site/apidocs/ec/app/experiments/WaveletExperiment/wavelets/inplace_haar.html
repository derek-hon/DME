<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (18) on Fri Feb 24 15:31:35 EST 2023 -->
<title>inplace_haar (ecj 27 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2023-02-24">
<meta name="description" content="declaration: package: ec.app.experiments.WaveletExperiment.wavelets, class: inplace_haar">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon"></span><span class="nav-bar-toggle-icon"></span><span class="nav-bar-toggle-icon"></span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/inplace_haar.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li>Nested</li>
<li><a href="#field-summary">Field</a></li>
<li><a href="#constructor-summary">Constr</a></li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li><a href="#field-detail">Field</a></li>
<li><a href="#constructor-detail">Constr</a></li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">ec.app.experiments.WaveletExperiment.wavelets</a></div>
<h1 title="Class inplace_haar" class="title">Class inplace_haar</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://download.java.net/java/early_access/jdk18/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance"><a href="wavelet_base.html" title="class in ec.app.experiments.WaveletExperiment.wavelets">ec.app.experiments.WaveletExperiment.wavelets.wavelet_base</a>
<div class="inheritance">ec.app.experiments.WaveletExperiment.wavelets.inplace_haar</div>
</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">inplace_haar</span>
<span class="extends-implements">extends <a href="wavelet_base.html" title="class in ec.app.experiments.WaveletExperiment.wavelets">wavelet_base</a></span></div>
<div class="block"><h4>
   Copyright and Use
</h4>

<p>
   You may use this source code without limitation and without
   fee as long as you include:
</p>
<blockquote>
     This software was written and is copyrighted by Ian Kaplan, Bear
     Products International, www.bearcave.com, 2001.
</blockquote>
<p>
   This software is provided "as is", without any warrenty or
   claim as to its usefulness.  Anyone who uses this source code
   uses it at their own risk.  Nor is any support provided by
   Ian Kaplan and Bear Products International.
<p>
   Please send any bug fixes or suggested source changes to:
<pre>
     iank@bearcave.com
</pre>

<p>
   To generate the documentation for the <tt>wavelets</tt> package
   using Sun Microsystem's <tt>javadoc</tt> use the command
<pre>
        javadoc -private wavelets
</pre>

<p>
   The inplace_haar class calculates an in-place Haar wavelet
   transform.  By in-place it's ment that the result occupies the same
   array as the data set on which the Haar transform is calculated.

<p>
   The Haar wavelet calculation is awkward when the data values are
   not an even power of two.  This is especially true for the in-place
   Haar.  So here we only support data that falls into an even power
   of two.

<p>
   The sad truth about computation is that the time-space tradeoff
   is an iron rule.  The Haar in-place wavelet transform is more 
   memory efficient, but it also takes more computation.

<p>
   The algorithm used here is from <i>Wavelets Made Easy</i>
   by Yves Nievergelt, section 1.4.  The in-place transform
   replaces data values when Haar values and coefficients.
   This algorithm uses a butterfly pattern, where the indices
   are calculated by the following:

<pre>
   for (l = 0; l <span class="invalid-tag">invalid input: '&lt;'</span> log<sub>2</sub>( size ); l++) {
     for (j = 0; j <span class="invalid-tag">invalid input: '&lt;'</span> size; j++) {
        <b>a</b><sub>j</sub> = 2<sup>l</sup> * (2 * j);
        <b>c</b><sub>j</sub> = 2<sup>l</sup> * ((2 * j) + 1);
        if (c<sub>j</sub> >= size)
          break;
     } <i>// for j</i>
   } <i>// for l</i>
</pre>

<p>
   If there are 16 data elements (indexed 0..15), these loops will
   generate the butterfly index pattern shown below, where the first
   element in a pair is <b>a</b><sub>j</sub>, the Haar value and the
   second element is <b>c</b><sub>j</sub>, the Haar coefficient.

<pre>
{0, 1} {2, 3} {4, 5} {6, 7} {8, 9} {10, 11} {12, 13} {14, 15}
{0, 2} {4, 6} {8, 10} {12, 14}
{0, 4} {8, 12}
{0, 8}
</pre>

<p>
  Each of these index sets represents a Haar wavelet frequency (here
  they are listed from the highest frequency to the lowest).</div>
<dl class="notes">
<dt>Author:</dt>
<dd>Ian Kaplan</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>(package private) boolean</code></div>
<div class="col-second even-row-color"><code><a href="#isOrdered" class="member-name-link">isOrdered</a></code></div>
<div class="col-last even-row-color">
<div class="block">initially false: true means wavefx is ordered by frequency</div>
</div>
<div class="col-first odd-row-color"><code>private double[]</code></div>
<div class="col-second odd-row-color"><code><a href="#wavefx" class="member-name-link">wavefx</a></code></div>
<div class="col-last odd-row-color">
<div class="block">result of calculating the Haar wavelet</div>
</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">inplace_haar</a>()</code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) double[]</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getwavefx()" class="member-name-link">getwavefx</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#inverse()" class="member-name-link">inverse</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">
     Regenerate the data from the Haar wavelet function.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#inverse_butterfly()" class="member-name-link">inverse_butterfly</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">
    Calculate the inverse Haar transform on the result of
    the in-place Haar transform.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#inverse_ordered()" class="member-name-link">inverse_ordered</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">
     Calculate the inverse Haar transform on an ordered
     set of coefficients.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#order()" class="member-name-link">order</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">

     Order the result of the in-place Haar wavelet function,
     referenced by wavefx.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#pr()" class="member-name-link">pr</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Print the result of the Haar wavelet function.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#pr_ordered()" class="member-name-link">pr_ordered</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">
     Print the Haar value and coefficient showing the 
     ordering.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setIsOrdered()" class="member-name-link">setIsOrdered</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setWavefx(double%5B%5D)" class="member-name-link">setWavefx</a><wbr>(double[]&nbsp;vector)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Set the wavefx reference variable to the data vector.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#spectrum_calc(double%5B%5D,int,int)" class="member-name-link">spectrum_calc</a><wbr>(double[]&nbsp;values,
 int&nbsp;start,
 int&nbsp;end)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Recursively calculate the Haar spectrum, replacing data in the
    original array with the calculated averages.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#wavelet_calc(double%5B%5D)" class="member-name-link">wavelet_calc</a><wbr>(double[]&nbsp;values)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">
   Calculate the in-place Haar wavelet function.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#wavelet_spectrum(double%5B%5D)" class="member-name-link">wavelet_spectrum</a><wbr>(double[]&nbsp;values)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">
   Calculate the Haar wavelet spectrum</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://download.java.net/java/early_access/jdk18/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://download.java.net/java/early_access/jdk18/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://download.java.net/java/early_access/jdk18/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://download.java.net/java/early_access/jdk18/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://download.java.net/java/early_access/jdk18/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://download.java.net/java/early_access/jdk18/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://download.java.net/java/early_access/jdk18/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://download.java.net/java/early_access/jdk18/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://download.java.net/java/early_access/jdk18/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://download.java.net/java/early_access/jdk18/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://download.java.net/java/early_access/jdk18/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://download.java.net/java/early_access/jdk18/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="wavefx">
<h3>wavefx</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">double[]</span>&nbsp;<span class="element-name">wavefx</span></div>
<div class="block">result of calculating the Haar wavelet</div>
</section>
</li>
<li>
<section class="detail" id="isOrdered">
<h3>isOrdered</h3>
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">isOrdered</span></div>
<div class="block">initially false: true means wavefx is ordered by frequency</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>inplace_haar</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">inplace_haar</span>()</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="getwavefx()">
<h3>getwavefx</h3>
<div class="member-signature"><span class="return-type">double[]</span>&nbsp;<span class="element-name">getwavefx</span>()</div>
</section>
</li>
<li>
<section class="detail" id="setWavefx(double[])">
<h3>setWavefx</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setWavefx</span><wbr><span class="parameters">(double[]&nbsp;vector)</span></div>
<div class="block">Set the wavefx reference variable to the data vector.  Also,
    initialize the isOrdered flag to false.  This indicates that the
    Haar coefficients have not been calculated and ordered by
    frequency.</div>
</section>
</li>
<li>
<section class="detail" id="setIsOrdered()">
<h3>setIsOrdered</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setIsOrdered</span>()</div>
</section>
</li>
<li>
<section class="detail" id="wavelet_calc(double[])">
<h3>wavelet_calc</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">wavelet_calc</span><wbr><span class="parameters">(double[]&nbsp;values)</span></div>
<div class="block"><p>
   Calculate the in-place Haar wavelet function.  The
   data values are overwritten by the coefficient result, which
   is pointed to by a local reference (<tt>wavefx</tt>).

<p>
   The in-place Haar transform leaves the coefficients in a butterfly
   pattern.  The Haar transform calculates a Haar value
   (<tt><b>a</b><tt>) and a coefficient (<tt>c</tt>) from the forumla
   shown below.

<pre>
  <b>a</b><sub>i</sub> = (v<sub>i</sub> + v<sub>i+1</sub>)/2
   c<sub>i</sub> = (v<sub>i</sub> - v<sub>i+1</sub>)/2
</pre>

<p>

   In the in-place Haar transform the values for <tt><b>a</b></tt> and
   <tt>c</tt> replace the values for v<sub>i</sub> and
   v<sub>i+1</sub>. Subsequent passes calculate new <tt><b>a</b></tt>
   and <tt>c</tt> values from the previous
   <tt><b>a</b><sub>i</sub></tt> and <tt><b>a</b><sub>i+1</sub></tt>
   values.  The produces the butterfly pattern outlined below.

<pre>

v<sub>0</sub> v<sub>1</sub> v<sub>2</sub> v<sub>3</sub> v<sub>4</sub> v<sub>5</sub> v<sub>6</sub> v<sub>7</sub>

<b>a</b><sub>0</sub> c<sub>0</sub> <b>a</b><sub>0</sub> c<sub>0</sub> <b>a</b><sub>0</sub> c<sub>0</sub> <b>a</b><sub>0</sub> c<sub>0</sub>

<b>a</b><sub>1</sub> c<sub>0</sub> c<sub>1</sub> c<sub>0</sub> <b>a</b><sub>1</sub> c<sub>0</sub> c<sub>1</sub> c<sub>0</sub>

<b>a</b><sub>2</sub> c<sub>0</sub> c<sub>1</sub> c<sub>0</sub> c<sub>2</sub> c<sub>0</sub> c<sub>1</sub> c<sub>0</sub>

</pre>

<p> 
   For example, Haar wavelet the calculation with the data set 
   {3, 1, 0, 4, 8, 6, 9, 9} is shown below.  Bold type
   denotes an <b>a</b> value which will be used in the 
   next sweep of the calculation.

<pre>
3  1  0  4  8  6  9  9

<b>2</b>  1  <b>2</b> -2  <b>7</b>  1  <b>9</b>  0

<b>2</b>  1  0 -2  <b>8</b>  1 -1  0

<b>5</b>  1  0 -2 -3  1 -1  0
</pre></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="wavelet_base.html#wavelet_calc(double%5B%5D)">wavelet_calc</a></code>&nbsp;in class&nbsp;<code><a href="wavelet_base.html" title="class in ec.app.experiments.WaveletExperiment.wavelets">wavelet_base</a></code></dd>
<dt>Parameters:</dt>
<dd><code>values</code> - An array of double data values from which the
      Haar wavelet function will be calculated.  The
      number of values must be a power of two.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="spectrum_calc(double[],int,int)">
<h3>spectrum_calc</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">spectrum_calc</span><wbr><span class="parameters">(double[]&nbsp;values,
 int&nbsp;start,
 int&nbsp;end)</span></div>
<div class="block">Recursively calculate the Haar spectrum, replacing data in the
    original array with the calculated averages.</div>
</section>
</li>
<li>
<section class="detail" id="wavelet_spectrum(double[])">
<h3>wavelet_spectrum</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">wavelet_spectrum</span><wbr><span class="parameters">(double[]&nbsp;values)</span></div>
<div class="block"><p>
   Calculate the Haar wavelet spectrum

<p> 
   Wavelet calculations sample a signal via a window.  In the case of
   the Haar wavelet, this window is a rectangle.  The signal is
   sampled in passes, using a window of a wider width for each pass.
   Each sampling can be thought of as generating a spectrum of the
   original signal at a particular resolution.

<p>
   In the case of the Haar wavelet, the window is initially two values
   wide.  The first spectrum has half as many values as the original
   signal, where each new value is the average of two values from 
   the original signal.

<p>
   The next spectrum is generated by increasing the window
   width by a factor of two and averaging four elements.
   The third spectrum is generated by increasing the
   window size to eight, etc...  Note that each  of these
   averages can be formed from the previous average.

<p>
   For example, if the initial data set is
<pre>
    { 32.0, 10.0, 20.0, 38.0, 37.0, 28.0, 38.0, 34.0,
      18.0, 24.0, 18.0,  9.0, 23.0, 24.0, 28.0, 34.0 }
</pre>
<p>
    The first spectrum is constructed by averaging
    elements {0,1}, {2,3}, {4,5} ...
</p>
<pre>
    {21, 29, 32.5, 36, 21, 13.5, 23.5, 31} <i>1<sup>st</sup> spectrum</i>
</pre>
<p>
    The second spectrum is constructed by averaging elements
    averaging elements {0,1}, {2,3} in the first spectrum:
</p>
<pre>
    {25, 34.25, 17.25, 27.25}           <i>2<sup>nd</sup> spectrum</i>

    {29.625, 22.25}                     <i>3<sup>ed</sup> spectrum</i>

    {25.9375}                           <i>4<sup>th</sup> spectrum</i>
</pre>
<p>
    Note that we can calculate the Haar spectrum "in-place", by
    replacing the original data values with the spectrum values:
<pre>
    {0, 
     25.9375, 
     29.625, 22.25, 
     25, 34.25, 17.25, 27.25,
     21, 29, 32.5, 36, 21, 13.5, 23.5, 31}
</pre>
<p>
    The spetrum is ordered by increasing frequency.
    This is the same ordering used for the Haar coefficients.
    Keeping to this ordering allows the same code to be applied
    to both the Haar spectrum and a set of Haar coefficients.
</p>
<p>
    This function will destroy the original data.
    When the Haar spectrum is calculated information is lost.
    For example, without the Haar coefficients, which provide the
    difference between the two numbers that form the average, there
    may be several numbers which satisify the equation
<pre>
   <b>a</b><sub>i</sub> = (v<sub>j</sub> + v<sub>j+1</sub>)/2
</pre>

<p>
  For 2<sup>n</sup> initial elements, there will be
  2<sup>n</sup> - 1 results.  For example:
</p>
<pre>
    512 : initial length
    256 : 1st spectrum
    128 : 2nd spectrum
     64 : 3ed spectrum
     32 : 4th spectrum
     16 : 5th spectrum
      8 : 6th spectrum
      4 : 7th spectrum
      2 : 8th spectrum
      1 : 9th spectrum (overall average)
</pre>

<p>
  Since this is an in-place algorithm, the result is
  returned in the values argument.
</p></div>
</section>
</li>
<li>
<section class="detail" id="pr()">
<h3>pr</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">pr</span>()</div>
<div class="block">Print the result of the Haar wavelet function.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="wavelet_base.html#pr()">pr</a></code>&nbsp;in class&nbsp;<code><a href="wavelet_base.html" title="class in ec.app.experiments.WaveletExperiment.wavelets">wavelet_base</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="pr_ordered()">
<h3>pr_ordered</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">pr_ordered</span>()</div>
<div class="block"><p>
     Print the Haar value and coefficient showing the 
     ordering.  The Haar value is printed first, followed
     by the coefficients in increasing frequency.  An
     example is shown below.  The Haar value is shown in
     bold.  The coefficients are in normal type.

<p>
    Data set
<pre>
    { 32.0, 10.0, 20.0, 38.0,
      37.0, 28.0, 38.0, 34.0,
      18.0, 24.0, 18.0,  9.0, 
      23.0, 24.0, 28.0, 34.0 }
</pre>
<p>
    Ordered Haar transform:
<pre>
   <b>25.9375</b>
   3.6875
   -4.625 -5.0
   -4.0 -1.75 3.75 -3.75
   11.0 -9.0 4.5 2.0 -3.0 4.5 -0.5 -3.0
</pre></div>
</section>
</li>
<li>
<section class="detail" id="order()">
<h3>order</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">order</span>()</div>
<div class="block"><p>

     Order the result of the in-place Haar wavelet function,
     referenced by wavefx.  As noted above in the documentation for
     <tt>wavelet_calc()</tt>, the in-place Haar transform leaves the
     coefficients in a butterfly pattern.  This can be awkward for
     some calculations.  The <tt>order</tt> function orders the
     coefficients by frequency, from the lowest frequency to the
     highest.  The number of coefficients for each frequency band
     follow powers of two (e.g., 1, 2, 4, 8 ... 2<sup>n</sup>).
     An example of the coefficient sort performed by the <tt>order()</tt>
     function is shown below;

<pre>
before: <b>a</b><sub>2</sub> c<sub>0</sub> c<sub>1</sub> c<sub>0</sub> c<sub>2</sub> c<sub>0</sub> c<sub>1</sub> c<sub>0</sub>

after:  <b>a</b><sub>2</sub> c<sub>2</sub> c<sub>1</sub> c<sub>1</sub> c<sub>0</sub> c<sub>0</sub> c<sub>0</sub> c<sub>0</sub>

</pre>

<p>
     The results in the same ordering as the ordered Haar wavelet
     transform.

<p>
     If the number of elements is 2<sup>n</sup>, then the largest
     number of coefficients will be 2<sup>n-1</sup>.  Each of the
     coefficients in the largest group is separated by one element
     (which contains other coefficients).  This algorithm pushes these
     together so they are not separated.  These coefficients now make
     up half of the array.  The remaining coefficients take up the
     other half.  The next frequency down is also separated by one
     element.  These are pushed together taking up half of the half.
     The algorithm keeps going until only one coefficient is left.

<p>
     As with wavelet_calc above, this algorithm assumes that
     the number of values is a power of two.</div>
</section>
</li>
<li>
<section class="detail" id="inverse()">
<h3>inverse</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">inverse</span>()</div>
<div class="block"><p>
     Regenerate the data from the Haar wavelet function.

<p>

     There is no information loss in the Haar function.  The original
     data can be regenerated by reversing the calculation.  Given
     a Haar value, <b>a</b> and a coefficient <b>c</b>, two Haar
     values can be generated

<pre>
        <b>a</b><sub>i</sub>  = a + c;
        <b>a</b><sub>i+1</sub> = a - c;
</pre>

<p>
     The transform is calculated from the low frequency coefficients
     to the high frequency coefficients.  An example is shown below
     for the result of the ordered Haar transform.  Note that the
     values are in bold and the coefficients are in normal type.

<p>
To regenerate {<a>a</b><sub>1</sub>, <a>a</b><sub>2</sub>, <a>a</b><sub>3</sub>, <a>a</b><sub>4</sub>, <a>a</b><sub>5</sub>, <a>a</b><sub>6</sub>, <a>a</b><sub>7</sub>, <a>a</b><sub>8</sub>} from
<pre>
<b>a</b><sub>1</sub>
c<sub>1</sub>
c<sub>2</sub> c<sub>3</sub>
c<sub>4</sub> c<sub>5</sub> c<sub>6</sub> c<sub>7</sub>
</pre>
<p>
   The inverse Haar transform is applied:

<pre>
<b>a</b><sub>1</sub> = <b>a</b><sub>1</sub> + c<sub>1</sub>
<b>a</b><sub>2</sub> = <b>a</b><sub>1</sub> - c<sub>1</sub>

<b>a</b><sub>1</sub> = <b>a</b><sub>1</sub> + c<sub>2</sub>
<b>a</b><sub>2</sub> = <b>a</b><sub>1</sub> - c<sub>2</sub>
<b>a</b><sub>3</sub> = <b>a</b><sub>2</sub> + c<sub>3</sub>
<b>a</b><sub>4</sub> = <b>a</b><sub>2</sub> - c<sub>3</sub>

<b>a</b><sub>1</sub> = <b>a</b><sub>1</sub> + c<sub>4</sub>
<b>a</b><sub>2</sub> = <b>a</b><sub>1</sub> - c<sub>4</sub>
<b>a</b><sub>3</sub> = <b>a</b><sub>2</sub> + c<sub>5</sub>
<b>a</b><sub>4</sub> = <b>a</b><sub>2</sub> - c<sub>5</sub>
<b>a</b><sub>5</sub> = <b>a</b><sub>3</sub> + c<sub>6</sub>
<b>a</b><sub>6</sub> = <b>a</b><sub>3</sub> - c<sub>6</sub>
<b>a</b><sub>7</sub> = <b>a</b><sub>4</sub> + c<sub>7</sub>
<b>a</b><sub>8</sub> = <b>a</b><sub>4</sub> - c<sub>7</sub>
</pre>
<p>
    For example:

<pre>
<b>5.0</b>
-3.0
0.0 -1.0
1.0 -2.0 1.0 0.0

<b>5.0</b>+(-3), <b>5.0</b>-(-3) = {<b>2</b> <b>8</b>}

<b>2</b>+0, <b>2</b>-0, <b>8</b>+(-1), <b>8</b>-(-1) = {<b>2, 2, 7, 9</b>}

<b>2</b>+1, <b>2</b>-1, <b>2</b>+(-2), <b>2</b>-(-2), <b>7</b>+1, <b>7</b>-1, <b>9</b>+0, <b>9</b>-0 = {3,1,0,4,8,6,9,9}

</pre>

<p>
   By using the butterfly indices the inverse transform can
   also be applied to an unordered in-place haar function.

<p>
   This function checks the to see whether the wavefx array is
   ordered.  If wavefx is ordered the inverse transform described
   above is applied.  If the data remains in the in-order configuration
   an inverse butterfly is applied.  Note that once the inverse
   Haar is calculated the Haar function data will be replaced by
   the original data.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="wavelet_base.html#inverse()">inverse</a></code>&nbsp;in class&nbsp;<code><a href="wavelet_base.html" title="class in ec.app.experiments.WaveletExperiment.wavelets">wavelet_base</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="inverse_ordered()">
<h3>inverse_ordered</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">inverse_ordered</span>()</div>
<div class="block"><p>
     Calculate the inverse Haar transform on an ordered
     set of coefficients.
<p>
     See comment above for the <tt>inverse()</tt> method
     for details.
<p>
     The algorithm above uses an implicit temporary.  The
     in-place algorithm is a bit more complex.  As noted
     above, the Haar value and coefficient are replaced
     with the newly calculated values:

<pre>
     t<sub>1</sub> = <b>a</b><sub>1</sub> + c<sub>1</sub>;
     t<sub>2</sub> = <b>a</b><sub>1</sub> - c<sub>1</sub>;
     <b>a</b><sub>1</sub> = t<sub>1</sub>;
     c<sub>1</sub> = t<sub>2</sub>
</pre>

<p>
    As the calculation proceeds and the coefficients are replaced by
    the newly calculated Haar values, the values are out of order.
    This is shown in the below (use <tt>javadoc -private
    wavelets</tt>).  Here each element is numbered with a subscript as
    it should be ordered.  A sort operation reorders these values
    as the calculation proceeds.  The variable <tt>L</tt> is the power of
    two.

<pre>
start: {<b>5.0</b>, -3.0, 0.0, -1.0, 1.0, -2.0, 1.0, 0.0}
[0, 1]
L = 1
{<b>2.0</b><sub>0</sub>, <b>8.0</b><sub>1</sub>, 0.0, -1.0, 1.0, -2.0, 1.0, 0.0}
 sort:

 start: {<b>2.0</b><sub>0</sub>, <b>8.0</b><sub>1</sub>, 0.0, -1.0, 1.0, -2.0, 1.0, 0.0}
[0, 2], [1, 3]
L = 2
{<b>2.0</b><sub>0</sub>, <b>7.0</b><sub>2</sub>, <b>2.0</b><sub>1</sub>, <b>9.0</b><sub>3</sub>, 1.0, -2.0, 1.0, 0.0}
 sort:
exchange [1, 2]
{<b>2.0</b><sub>0</sub>, <b>2.0</b><sub>1</sub>, <b>7.0</b><sub>2</sub>, <b>9.0</b><sub>3</sub>, 1.0, -2.0, 1.0, 0.0}

 start: {2.0, 2.0, 7.0, 9.0, 1.0, -2.0, 1.0, 0.0}
[0, 4], [1, 5], [2, 6], [3, 7]
L = 4
{<b>3.0</b><sub>0</sub>, <b>0.0</b><sub>2</sub>, <b>8.0</b><sub>4</sub>, <b>9.0</b><sub>6</sub>, <b>1.0</b><sub>1</sub>, <b>4.0</b><sub>3</sub>, <b>6.0</b><sub>5</sub>, <b>9.0</b><sub>7</sub></b>}
 sort:
exchange [1, 4]
{<b>3.0</b><sub>0</sub>, <b>1.0</b><sub>1</sub>, <b>8.0</b><sub>4</sub>, <b>9.0</b><sub>6</sub>, <b>0.0</b><sub>2</sub>, <b>4.0</b><sub>3</sub>, <b>6.0</b><sub>5</sub>, <b>9.0</b><sub>7</sub>}
exchange [2, 5]
{<b>3.0</b><sub>0</sub>, <b>1.0</b><sub>1</sub>, <b>4.0</b><sub>3</sub>, <b>9.0</b><sub>6</sub>, <b>0.0</b><sub>2</sub>, <b>8.0</b><sub>4</sub>, <b>6.0</b><sub>5</sub>, <b>9.0</b><sub>7</sub>}
exchange [3, 6]
{<b>3.0</b><sub>0</sub>, <b>1.0</b><sub>1</sub>, <b>4.0</b><sub>3</sub>, <b>6.0</b><sub>5</sub>, <b>0.0</b><sub>2</sub>, <b>8.0</b><sub>4</sub>, <b>9.0</b><sub>6</sub>, <b>9.0</b><sub>7</sub>}
exchange [2, 4]
{<b>3.0</b><sub>0</sub>, <b>1.0</b><sub>1</sub>, <b>0.0</b><sub>2</sub>, <b>6.0</b><sub>5</sub>, <b>4.0</b><sub>3</sub>, <b>8.0</b><sub>4</sub>, <b>9.0</b><sub>6</sub>, <b>9.0</b><sub>7</sub>}
exchange [3, 5]
{<b>3.0</b><sub>0</sub>, <b>1.0</b><sub>1</sub>, <b>0.0</b><sub>2</sub>, <b>8.0</b><sub>4</sub>, <b>4.0</b><sub>3</sub>, <b>6.0</b><sub>5</sub>, <b>9.0</b><sub>6</sub>, <b>9.0</b><sub>7</sub>}
exchange [3, 4]
{<b>3.0</b><sub>0</sub>, <b>1.0</b><sub>1</sub>, <b>0.0</b><sub>2</sub>, <b>4.0</b><sub>3</sub>, <b>8.0</b><sub>4</sub>, <b>6.0</b><sub>5</sub>, <b>9.0</b><sub>6</sub>, <b>9.0</b><sub>7</sub>}
</pre></div>
</section>
</li>
<li>
<section class="detail" id="inverse_butterfly()">
<h3>inverse_butterfly</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">inverse_butterfly</span>()</div>
<div class="block"><p>
    Calculate the inverse Haar transform on the result of
    the in-place Haar transform.

<p>
    The inverse butterfly exactly reverses in-place Haar
    transform.  Instead of generating coefficient values
    (<tt>c<sub>i</sub><tt>), the inverse butterfly calculates
    Haar values (<tt><b>a</b><sub>i</sub>) using the 
    equations:
<pre>
        <b>new_a</b><sub>i</sub> = <b>a</b><sub>i</sub> + c<sub>i</sub>
        <b>new_a</b><sub>i+1</sub> = <b>a</b><sub>i</sub> - c<sub>i</sub>
</pre>

<pre>
<b>a</b><sub>0</sub> c<sub>0</sub> c<sub>1</sub> c<sub>0</sub> c<sub>2</sub> c<sub>0</sub> c<sub>1</sub> c<sub>0</sub>

<b>a</b><sub>1</sub> = <b>a</b><sub>0</sub> + c<sub>2</sub>
<b>a</b><sub>1</sub> = <b>a</b><sub>0</sub> - c<sub>2</sub>

<b>a</b><sub>1</sub> c<sub>0</sub> c<sub>1</sub> c<sub>0</sub> <b>a</b><sub>1</sub> c<sub>0</sub> c<sub>1</sub> c<sub>0</sub>

<b>a</b><sub>2</sub> = <b>a</b><sub>1</sub> + c<sub>1</sub>
<b>a</b><sub>2</sub> = <b>a</b><sub>1</sub> - c<sub>1</sub>
<b>a</b><sub>2</sub> = <b>a</b><sub>1</sub> + c<sub>1</sub>
<b>a</b><sub>2</sub> = <b>a</b><sub>1</sub> - c<sub>1</sub>

<b>a</b><sub>2</sub> c<sub>0</sub> <b>a</b><sub>2</sub> c<sub>0</sub> <b>a</b><sub>2</sub> c<sub>0</sub> <b>a</b><sub>2</sub> c<sub>0</sub>

<b>a</b><sub>3</sub> = <b>a</b><sub>2</sub> + c<sub>0</sub>
<b>a</b><sub>3</sub> = <b>a</b><sub>2</sub> - c<sub>0</sub>
<b>a</b><sub>3</sub> = <b>a</b><sub>2</sub> + c<sub>0</sub>
<b>a</b><sub>3</sub> = <b>a</b><sub>2</sub> - c<sub>0</sub>
<b>a</b><sub>3</sub> = <b>a</b><sub>2</sub> + c<sub>0</sub>
<b>a</b><sub>3</sub> = <b>a</b><sub>2</sub> - c<sub>0</sub>
<b>a</b><sub>3</sub> = <b>a</b><sub>2</sub> + c<sub>0</sub>
<b>a</b><sub>3</sub> = <b>a</b><sub>2</sub> - c<sub>0</sub>

<b>a</b><sub>3</sub> <b>a</b><sub>3</sub> <b>a</b><sub>3</sub> <b>a</b><sub>3</sub> <b>a</b><sub>3</sub> <b>a</b><sub>3</sub> <b>a</b><sub>3</sub> <b>a</b><sub>3</sub> 

</pre>

<p>
A numeric example is shown below.

<pre>
<b>5</b><sub>0</sub>  1<sub>0</sub>  0<sub>1</sub> -2<sub>0</sub> -3<sub>2</sub>  1<sub>0</sub> -1<sub>1</sub>  0<sub>0</sub>

<b>a</b><sub>1</sub> = 5 + (-3) = 2
<b>a</b><sub>1</sub> = 5 - (-3) = 8

<b>2</b><sub>1</sub>  1<sub>0</sub>  0<sub>1</sub> -2<sub>0</sub> <b>8</b><sub>1</sub>  1<sub>0</sub> -1<sub>1</sub>  0<sub>0</sub>

<b>a</b><sub>2</sub> = 2 + 0    = 2
<b>a</b><sub>2</sub> = 2 - 0    = 2
<b>a</b><sub>2</sub> = 8 + (-1) = 7
<b>a</b><sub>2</sub> = 8 - (-1) = 9

<b>2</b><sub>2</sub>  1<sub>0</sub>  <b>2</b><sub>2</sub> -2<sub>0</sub> <b>7</b><sub>2</sub>  1<sub>0</sub> <b>9</b><sub>2</sub>  0<sub>0</sub>

<b>a</b><sub>3</sub> = 2 + 1    = 3
<b>a</b><sub>3</sub> = 2 - 1    = 1
<b>a</b><sub>3</sub> = 2 + (-2) = 0
<b>a</b><sub>3</sub> = 2 - (-2) = 4
<b>a</b><sub>3</sub> = 7 + 1    = 8
<b>a</b><sub>3</sub> = 7 - 1    = 6
<b>a</b><sub>3</sub> = 9 + 0    = 9
<b>a</b><sub>3</sub> = 9 - 0    = 9

<b>3</b><sub>3</sub>  <b>1</b><sub>3</sub>  <b>0</b><sub>3</sub>  <b>4</b><sub>3</sub>  <b>8</b><sub>3</sub>  <b>6</b><sub>3</sub>  <b>9</b><sub>3</sub>  <b>9</b><sub>3</sub>

</pre>

<p>
   Note that the inverse_butterfly function is faster than
   the inverse_ordered function, since data does not have
   to be reshuffled during the calculation.</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2023. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
